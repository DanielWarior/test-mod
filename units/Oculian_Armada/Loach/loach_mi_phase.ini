
[core]
name: loach_mi_phase
copyFrom: loach_mi.ini
displayText: Loach Mikanate (Phased)
class: CustomUnitMetadata
showInEditor:false
energyMax: 125
energyRegen: -0.375
autoTriggerCooldownTime: 0.2s
disableAllUnitCollisions: true
isUnrepairableUnit: true
canNotBeDirectlyAttacked: true
tags: phase



[graphics]
default_frame: 4



[turret_1]
projectile: dummy
shoot_sound: NONE



[turret_2]
projectile: dummy
shoot_sound: NONE



[turret_3]
projectile: dummy
shoot_sound: NONE



[projectile_dummy]
instant: false
life: 1
speed: 1
directDamage: 0
areaDamage: 0
areaRadius: 0
largeHitEffect: false
explodeEffect: NONE
explodeEffectOnShield: NONE
hitSound: false
invisible: true
trailEffect: false



[action_phase]
isVisible: false



[action_unphase]
whenBuilding_triggerAction: unphasesound
whenBuilding_playAnimation: unphasing
canPlayerCancel: false
convertTo: loach_mi
buildSpeed: 0.5s
addActionCooldownTime: 2s
addActionCooldownApplyToActions: phase
allowMultipleInQueue: false
resetCustomTimer: true
text: Unphase



[hiddenAction_forcephasedisplay]
autoTrigger: if self.lastConverted(withinSeconds=0.2)
buildSpeed: 0s
playAnimation: forcephase



[hiddenAction_forceunphase]
autoTrigger: if self.isEnergyEmpty()
alsoQueueAction: unphase



[hiddenAction_unphasesound]
buildSpeed: 0s
playSoundAtUnit: ROOT:sounds\Oculian_Armada\phase_cloak_deactivate.ogg



[hiddenAction_phasefast]
autoTrigger: if self.energy(greaterThan=93.75)
buildSpeed: 0s
playAnimation: diffusing1



[hiddenAction_phaseslow]
autoTrigger: if self.energy(lessThan=93.75) and self.energy(greaterThan=62.5)
setUnitStats: moveSpeed = 2.4, maxTurnSpeed = 3.6
playAnimation: diffusing2



[hiddenAction_phaseslower]
autoTrigger: if self.energy(lessThan=62.5)
setUnitStats: moveSpeed = 1.6, maxTurnSpeed = 2.4
playAnimation: diffusing3



[hiddenAction_unphasemovement]
autoTrigger: if self.isControlledByAi() and self.energy(lessThan=100) and not self.hasTakenDamage(withinSeconds=2) and self.hp(greaterThan=300)
buildSpeed: 0s
alsoQueueAction: unphase



[hiddenAction_panicunphase]
autoTrigger: if self.isControlledByAi() and self.energy(lessthan=75) and self.hp(greaterThan=175)
buildSpeed: 0s
alsoQueueAction: unphase



[animation_forcephase]
body_0s: {frame: 4, scale: 1}



[animation_unphasing]
blendIn: 1s
body_0s: {frame: 4, scale: 1}
body_0.125s: {frame: 3, scale: 1}
body_0.25s: {frame: 2, scale: 1}
body_0.375s: {frame: 1, scale: 1}
body_0.5s: {frame: 0, scale: 1}



[animation_diffusing1]
effect_0s: {name:CUSTOM|diffuse1, x:0, y:0}
effect_0.10s: {name:CUSTOM|diffuse1, x:0, y:0}



[animation_diffusing2]
effect_0s: {name:CUSTOM|diffuse2, x:0, y:0}
effect_0.5s: {name:CUSTOM|diffuse2, x:0, y:0}
effect_0.10s: {name:CUSTOM|diffuse2, x:0, y:0}
effect_0.15s: {name:CUSTOM|diffuse2, x:0, y:0}



[animation_diffusing3]
effect_0s: {name:CUSTOM|diffuse3, x:0, y:0}
effect_0.25s: {name:CUSTOM|diffuse3, x:0, y:0}
effect_0.5s: {name:CUSTOM|diffuse3, x:0, y:0}
effect_0.75s: {name:CUSTOM|diffuse3, x:0, y:0}
effect_0.10s: {name:CUSTOM|diffuse3, x:0, y:0}
effect_0.125s: {name:CUSTOM|diffuse3, x:0, y:0}
effect_0.15s: {name:CUSTOM|diffuse3, x:0, y:0}
effect_0.175s: {name:CUSTOM|diffuse3, x:0, y:0}



[effect_diffuse1]
life: 120
image: loach_mi_diffuse.png
color: #ffffff
alpha: 0.67
attachedToUnit: true
xOffsetRelativeRandom: 0.1
yOffsetRelativeRandom: 0.1
xSpeedRelativeRandom: 0.1
ySpeedRelativeRandom: 0.1
fadeInTime: 0
fadeOut: true
teamColorRatio: 1



[effect_diffuse2]
life: 120
image: loach_mi_diffuse.png
color: #ffffff
alpha: 0.67
attachedToUnit: true
xOffsetRelativeRandom: 0.15
yOffsetRelativeRandom: 0.15
xSpeedRelativeRandom: 0.15
ySpeedRelativeRandom: 0.15
fadeInTime: 0
fadeOut: true
teamColorRatio: 1



[effect_diffuse3]
life: 120
image: loach_mi_diffuse.png
color: #ffffff
alpha: 0.67
attachedToUnit: true
xOffsetRelativeRandom: 0.2
yOffsetRelativeRandom: 0.2
xSpeedRelativeRandom: 0.2
ySpeedRelativeRandom: 0.2
fadeInTime: 0
fadeOut: true
teamColorRatio: 1



[movement]
moveSpeed: 4.8
moveAccelerationSpeed: 0.12
moveDecelerationSpeed: 0.15
maxTurnSpeed: 7.2
turnAcceleration: 10.8