
[core]
name: loach_phase
displayText: Loach (Phased)
displayDescription: Oculian Phase Fighter \n-Phase ability that allows the unit to become intangible \n-Equipped with an EMP weapon \n-Compact Shena (15 dps 110 range\300% Shield Damage\25% Building Damage)
class: CustomUnitMetadata
price: 500
maxHp: 200
mass: 1000
techLevel: 2
buildSpeed: 12s
radius: 12
displayRadius: 12
isBio: false
fogOfWarSightRange: 20
showInEditor:false
energyMax: 100
energyRegen: -0.15
autoTriggerCooldownTime: 0.2s
disableAllUnitCollisions: true
isUnrepairableUnit: true
canNotBeDirectlyAttacked: true



[graphics]
total_frames: 5
default_frame: 4
image: loach.png
image_wreak: loach_dead.png
image_turret: NONE
imageScale:1
turretImageScale:1
lock_body_rotation_with_main_turret: false
image_shadow: AUTO
shadowOffsetX:1
shadowOffsetY:1



[attack]
turretRotateWithBody: true
canAttack: true
canAttackFlyingUnits: true
canAttackLandUnits: true
canAttackUnderwaterUnits: false
maxAttackRange: 110
shootDelay: 0.5s
turretMultiTargeting: true
isFixedFiring: true



[turret_1]
invisible: true
x: 0
y: 16
idleDir:0
turnSpeed: 2.4
projectile: dummy



[projectile_dummy]
instant: false
life: 1
speed: 1
directDamage: 0
areaDamage: 0
areaRadius: 0
largeHitEffect: false
explodeEffect: NONE
explodeEffectOnShield: NONE
hitSound: false
invisible: true
trailEffect: false



[action_phase]
isVisible: false



[action_unphase]
whenBuilding_triggerAction: unphasesound
whenBuilding_playAnimation: unphasing
canPlayerCancel: false
convertTo: loach
buildSpeed: 0.5s
addActionCooldownTime: 2s
addActionCooldownApplyToActions: phase
allowMultipleInQueue: false
text: Unphase



[hiddenAction_forceunphase]
autoTrigger: if self.isEnergyEmpty()
alsoQueueAction: unphase



[hiddenAction_unphasesound]
buildSpeed: 0s
playSoundAtUnit: ROOT:sounds\Oculian_Armada\phase_cloak_deactivate.ogg



[hiddenAction_phasefast]
autoTrigger: if self.energy(greaterThan=75)
buildSpeed: 0s
playAnimation: diffusing1



[hiddenAction_phaseslow]
autoTrigger: if self.energy(lessThan=75) and self.energy(greaterThan=50)
setUnitStats: moveSpeed = 2.4, maxTurnSpeed = 3.6
playAnimation: diffusing2



[hiddenAction_phaseslower]
autoTrigger: if self.energy(lessThan=50)
setUnitStats: moveSpeed = 1.6, maxTurnSpeed = 2.4
playAnimation: diffusing3



[hiddenAction_unphasemovement]
autoTrigger: if self.isControlledByAi() and self.energy(lessThan=85) and not self.isAttacking() and not self.hasTakenDamage(withinSeconds=2) and self.hp(greaterThan=175)
buildSpeed: 0s
alsoQueueAction: unphase



[hiddenAction_panicunphase]
autoTrigger: if self.isControlledByAi() and self.energy(lessthan=60) and self.hp(greaterThan=100)
buildSpeed: 0s
alsoQueueAction: unphase



[animation_unphasing]
blendIn: 1s
body_0s: {frame: 4, scale: 1}
body_0.125s: {frame: 3, scale: 1}
body_0.25s: {frame: 2, scale: 1}
body_0.375s: {frame: 1, scale: 1}
body_0.5s: {frame: 0, scale: 1}



[animation_diffusing1]
effect_0s: {name:CUSTOM|diffuse1, x:0, y:0}
effect_0.10s: {name:CUSTOM|diffuse1, x:0, y:0}



[animation_diffusing2]
effect_0s: {name:CUSTOM|diffuse2, x:0, y:0}
effect_0.5s: {name:CUSTOM|diffuse2, x:0, y:0}
effect_0.10s: {name:CUSTOM|diffuse2, x:0, y:0}
effect_0.15s: {name:CUSTOM|diffuse2, x:0, y:0}



[animation_diffusing3]
effect_0s: {name:CUSTOM|diffuse3, x:0, y:0}
effect_0.25s: {name:CUSTOM|diffuse3, x:0, y:0}
effect_0.5s: {name:CUSTOM|diffuse3, x:0, y:0}
effect_0.75s: {name:CUSTOM|diffuse3, x:0, y:0}
effect_0.10s: {name:CUSTOM|diffuse3, x:0, y:0}
effect_0.125s: {name:CUSTOM|diffuse3, x:0, y:0}
effect_0.15s: {name:CUSTOM|diffuse3, x:0, y:0}
effect_0.175s: {name:CUSTOM|diffuse3, x:0, y:0}



[effect_diffuse1]
life: 120
image: loach_diffuse.png
color: #ff00ff
alpha: 0.67
attachedToUnit: true
xOffsetRelativeRandom: 0.075
yOffsetRelativeRandom: 0.075
xSpeedRelativeRandom: 0.075
ySpeedRelativeRandom: 0.075
fadeInTime: 0
fadeOut: true
teamColorRatio: 0.5



[effect_diffuse2]
life: 120
image: loach_diffuse.png
color: #ff00ff
alpha: 0.67
attachedToUnit: true
xOffsetRelativeRandom: 0.1
yOffsetRelativeRandom: 0.1
xSpeedRelativeRandom: 0.1
ySpeedRelativeRandom: 0.1
fadeInTime: 0
fadeOut: true
teamColorRatio: 0.5



[effect_diffuse3]
life: 120
image: loach_diffuse.png
color: #ff00ff
alpha: 0.67
attachedToUnit: true
xOffsetRelativeRandom: 0.15
yOffsetRelativeRandom: 0.15
xSpeedRelativeRandom: 0.15
ySpeedRelativeRandom: 0.15
fadeInTime: 0
fadeOut: true
teamColorRatio: 0.5



[movement]
movementType: AIR
targetHeightDrift: 1
moveSpeed: 4.8
moveAccelerationSpeed: 0.12
moveDecelerationSpeed: 0.15
reverseSpeedPercentage: 0
maxTurnSpeed: 7.2
turnAcceleration: 10.8
moveSlidingMode :true
moveIgnoringBody: true
slowDeathFall: true